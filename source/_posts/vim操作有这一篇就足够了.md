---
title: vim操作有这一篇就足够了
tags: vim
categories: vim
date: 2020-07-04 12:21:13
---

<center>Author：闫玉良</center>

`vi/vim` 的重要性不言而喻，比如登录服务器操作。那么如何掌握呢？看这一篇足矣。

> 因为小闫同学最近迷上了 `vim`，正在使用并打算以后也用其彻底替代 `Pycharm` 等编辑工具，所以才有了此文。

<!--more-->

***更多精彩文章请关注公众号『Pythonnote』或者『全栈技术精选』***

## 1.介绍

`vi/vim` 是 `Linux` 上内置的一款文本编辑器，就如同 `Windows` 上的笔记本工具一样。

要想使用它，先要了解它的三种模式：**命令模式**、**输入模式**、**末行模式**（也被称为底线命令模式 `Last line mode`）。命令模式可以操作一些快捷键，比如滚屏操作，定位操作等；输入模式就是编辑模式，可以自由的打字输入；末行模式可以输入一些命令，来达到预期效果。

使用 `vi/vim` 打开一个文件时，默认就是**命令模式**；在命令模式下输入 `i` 时，便进入了**输入模式**；在输入模式下按 `esc` 键时，又会返回命令模式。在命令模式下，按 `:` （也就是按`shift` + `;`）时，会看到光标在窗口底部，此时进入了**末行模式**，在 `:` 后便可以输入命令。

> `vi` 是老版本文本编辑器，`vim` 现在成为了主流，他俩命令一样，只是 `vim` 扩展插件丰富，支持的功能更多而已。本文以常用的 `vim` 为例进行说明。

## 2.操作

打开一个文件：

```shell
vim test.txt
```

> 输入上述命令会在当前目录下寻找并打开 `test.txt` 文件，如果没有，则在当前目录下新建一个 `test.txt` 文件。

### 2.1 命令模式

> 以下内容全为快捷键，直接按即可，不会有什么显示。
>
> 2.注意区分大小写。
>
> 3.打开文件默认进入的就是命令模式，输入模式或者末行模式下按 `esc` 键进入命令模式

1) **控制光标**：`H`是左； `J` 是下；`K` 是上；`L` 是右。

> 可以使用方向键 (←↓↑→)控制，但是通常不这么做，因为程序员的双手一般都放在字母区域，去按方向键，再回到字母区域所需时间太长。使用 `hjkl` ，标准打字姿势中右手完全可以操作，方便快捷。

2) **滚屏操作**：需要与 `Ctrl` 键配合使用，向上滚动半屏是 `Ctrl + u` ，向下滚动半屏是 `Ctrl + d`。当然为了快速操作，还有滚动一屏：向上滚动一屏 `Ctrl + b` ，向下滚动一屏 `Ctrl + f`。

> 为了记忆，滚动半屏可以看做是 `up/down` ，分别是 `u/d`；滚动全屏可以看做 `back/forword`，分别是 `b/f`

3) **移动到行首或行尾**：这个快捷键一定要记忆，超级方便。

`0` ：它是数字0。可以快速移动光标到所在行的行首。

`$` ：英文输入下，按 `shift` 和数字键 4 即可。可以快速移动光标到所在行行尾第一个不是非空字符下。

`^` ：英文输入下，按 `shift` 和数字键 6 即可。可以快速移动光标到所在行，**第一个不为空格的字符**处。因为敲代码时总有缩进，当然希望到这一行代码的第一个字母，而不是这一行行首的空格了。

4) **其他移动光标的操作**：

`G` ：到文件最后一行。如果想要到指定的哪一行可以输入行号，再输入 `G` 。（注意：是大写的 `G`）比如到 67 行，输入 `67 + G`

> 到指定行是我最喜欢的功能。当然需要配合显示行号使用，显示行号会在命令模式处讲。

`gg` ：到文件第一行。

`>>` ：文本向右移动

`<<` ：文本左移

5) **删除操作**：

`x` ：删除光标后一个字符

`X` ：（大写）删除光标前一个字符

`d` ：删除键

`dd` ：删除光标所在行。如果想要删除指定多少行，先输入数字，再输入 `dd` 即可，比如删除往下的 37 行内容（包含光标所在行），输入 `37 dd` 。

`d0` ：删除光标前所有内容

`D` ：删除光标后所有内容

`daw` ：删除光标所在单词（**超级常用**）

配合可视模式选中一些内容，再按 `d` 就可以删除这些内容了。

6) **可视模式**：`v` 按字符移动光标选择内容，`V` (大写) 按行上下移动选择内容。

7) **撤销**：`u` 撤销一步操作，`Ctrl + r` 反撤销。

8) **复制粘贴**：`y` 是复制，`p` 是粘贴。配合可视模式，选中内容后，按 `y` 即可复制，按 `p` 粘贴。`yy` 是复制光标所在行。

> 注意：如果是复制一行内容，粘贴时会向下粘贴一行；如果是复制几个字符，会向光标后粘贴。**只针对当前文件有效**，也就是退出当前文件后，复制的内容不在了。

9) **重复操作**：`.` 重复上一步操作

10) **替换操作**：

按 `r` 后再按要替换的字母。如将 `n` 替换为 `m` ：将光标移动到字母 `n` 下，然后按 `r` ，再按 `m` 即可。

按 `R` 后，再按要替换的字母，替换后，光标会移动都后一个字符，可以再次执行替换操作，不必一直按 `r`。

11) **进入输入模式**：

`i`：插入光标前一个字符

`a`：插入光标后一个字符

`I`：插入行首

`A`：插入行尾

`o`：向下新开一行,插入行首

`O`：（大写）向上新开一行,插入行首

### 2.2 输入模式

输入模式下，不能使用快捷键，可以正常打字或者使用方向键控制光标。按 `Esc` 键进入命令模式。

### 2.3 末行模式

在命令模式下，按 `:` 进入末行模式。退出末行模式按 `esc` 键，即可进入命令模式。

1) 显示行号

```shell
:set nu
```

2) 查找

```shell
:/要查找的内容
```

按 `n` 查找下一个；按 `N` 查找上一个。

3) 高亮显示查找内容

```shell
:set hlsearch
```

4) 替换

```shell
末行模式下，将当前文件中的所有abc替换成123
:%s/abc/123/g

末行模式下，将第一行至第10行之间的abc替换成123
:1, 10s/abc/123/g
```

> 1.%表示整个文件；1, 10表示1到10行范围内
>
> 2.`s` 表示替换
>
> 3.`g` 表示全局

## 3.总结的一些骚操作

1.要查找光标所在单词，直接按下面的快捷键：

```shell
*
```

> 也就是按 `shift` + 键盘字母区上方数字键8

2.如何快速选中一个单词：先把光标移动到该单词下方，然后按 `b` 移动光标到单词首字母，按 `v` 进入可视模式，再按 `e` 选中当前单词，即 `bve`。选中之后就可以按 `y` 复制，或者按 `d` 删除了。

3.我想把内容复制后，其他文件也使用，就好像 `ctrl c` 那样。可以使用如下快捷键：

```shell
"+y
```

先选中所有复制内容，然后按上述快捷键（注意**上述快捷键是三个字符**）即可复制到系统的剪切板中。

4.如果我想在新打开的文件中复制上一个文件中复制的内容呢？

```shell
"+p
```

## 4.插件

`vim` 优秀就优秀在它可以使用插件，然后打造出一款类似 `Pycharm` 等 `IDE` 工具。本文列举一些常用插件，具体安装对应 GitHub 上操作，自己 `google` 一下。

**插件管理工具** ：`Vundle`

**目录树**：`NERDTree`

**搜索文件**：`CtrlP`

**基于内容搜索文件**：`ack`

**python函数跳转功能**：`ptags` 可以查看我的文章『https://www.pythonnote.cn/vim实现python函数跳转/』

**代码折叠**：这个不是插件，而是修改 `.vimrc` 配置文件，`Google` 一下

**代码补全**：`YCM` (`YouCompleteMe`)

> 暂时就想起这么多，以后再扩展吧。

***更多精彩文章请关注公众号『Pythonnote』或者『全栈技术精选』***